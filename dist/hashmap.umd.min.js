!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Mootable={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}var s,i,n=function(t){return t&&t.Math==Math&&t},o=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},h=function(t){try{return!!t()}catch(t){return!0}},c={}.toString,u=function(t){return c.call(t).slice(8,-1)},l="".split,f=h((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==u(t)?l.call(t,""):Object(t)}:Object,p=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},d=function(t){return f(p(t))},y=!h((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=o.document,m=b(g)&&b(g.createElement),v=function(t){return m?g.createElement(t):{}},k=!y&&!h((function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a})),S=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},x=function(t,e){if(!b(t))return t;var r,s;if(e&&"function"==typeof(r=t.toString)&&!b(s=r.call(t)))return s;if("function"==typeof(r=t.valueOf)&&!b(s=r.call(t)))return s;if(!e&&"function"==typeof(r=t.toString)&&!b(s=r.call(t)))return s;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,O={f:y?w:function(t,e,r){if(S(t),e=x(e,!0),S(r),k)try{return w(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},z=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},E=y?function(t,e,r){return O.f(t,e,z(1,r))}:function(t,e,r){return t[e]=r,t},F=function(t,e){try{E(o,t,e)}catch(r){o[t]=e}return e},I="__core-js_shared__",T=o[I]||F(I,{}),j=r((function(t){(t.exports=function(t,e){return T[t]||(T[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),C={}.hasOwnProperty,R=function(t,e){return C.call(t,e)},P=0,G=Math.random(),_=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++P+G).toString(36)},A="process"==u(o.process),M=o,L=function(t){return"function"==typeof t?t:void 0},q=function(t,e){return arguments.length<2?L(M[t])||L(o[t]):M[t]&&M[t][e]||o[t]&&o[t][e]},N=q("navigator","userAgent")||"",D=o.process,H=D&&D.versions,V=H&&H.v8;V?i=(s=V.split("."))[0]+s[1]:N&&(!(s=N.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=N.match(/Chrome\/(\d+)/))&&(i=s[1]);var K,W=i&&+i,B=!!Object.getOwnPropertySymbols&&!h((function(){return!Symbol.sham&&(A?38===W:W>37&&W<41)})),U=B&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Y=j("wks"),X=o.Symbol,J=U?X:X&&X.withoutSetter||_,Q=function(t){return R(Y,t)&&(B||"string"==typeof Y[t])||(B&&R(X,t)?Y[t]=X[t]:Y[t]=J("Symbol."+t)),Y[t]},Z=Math.ceil,$=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?$:Z)(t)},et=Math.min,rt=Math.max,st=Math.min,it=function(t){return function(e,r,s){var i,n,o=d(e),a=(i=o.length)>0?et(tt(i),9007199254740991):0,h=function(t,e){var r=tt(t);return r<0?rt(r+e,0):st(r,e)}(s,a);if(t&&r!=r){for(;a>h;)if((n=o[h++])!=n)return!0}else for(;a>h;h++)if((t||h in o)&&o[h]===r)return t||h||0;return!t&&-1}},nt={includes:it(!0),indexOf:it(!1)},ot={},at=nt.indexOf,ht=function(t,e){var r,s=d(t),i=0,n=[];for(r in s)!R(ot,r)&&R(s,r)&&n.push(r);for(;e.length>i;)R(s,r=e[i++])&&(~at(n,r)||n.push(r));return n},ct=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ut=Object.keys||function(t){return ht(t,ct)},lt=y?Object.defineProperties:function(t,e){S(t);for(var r,s=ut(e),i=s.length,n=0;i>n;)O.f(t,r=s[n++],e[r]);return t},ft=q("document","documentElement"),pt=j("keys"),dt=function(t){return pt[t]||(pt[t]=_(t))},yt=dt("IE_PROTO"),bt=function(){},gt=function(t){return"<script>"+t+"</"+"script>"},mt=function(){try{K=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;mt=K?function(t){t.write(gt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(K):((e=v("iframe")).style.display="none",ft.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(gt("document.F=Object")),t.close(),t.F);for(var r=ct.length;r--;)delete mt.prototype[ct[r]];return mt()};ot[yt]=!0;var vt=Object.create||function(t,e){var r;return null!==t?(bt.prototype=S(t),r=new bt,bt.prototype=null,r[yt]=t):r=mt(),void 0===e?r:lt(r,e)},kt=Q("unscopables"),St=Array.prototype;null==St[kt]&&O.f(St,kt,{configurable:!0,value:vt(null)});var xt=function(t){St[kt][t]=!0},wt=Function.toString;"function"!=typeof T.inspectSource&&(T.inspectSource=function(t){return wt.call(t)});var Ot,zt,Et,Ft=T.inspectSource,It=o.WeakMap,Tt="function"==typeof It&&/native code/.test(Ft(It)),jt=o.WeakMap;if(Tt){var Ct=T.state||(T.state=new jt),Rt=Ct.get,Pt=Ct.has,Gt=Ct.set;Ot=function(t,e){return e.facade=t,Gt.call(Ct,t,e),e},zt=function(t){return Rt.call(Ct,t)||{}},Et=function(t){return Pt.call(Ct,t)}}else{var _t=dt("state");ot[_t]=!0,Ot=function(t,e){return e.facade=t,E(t,_t,e),e},zt=function(t){return R(t,_t)?t[_t]:{}},Et=function(t){return R(t,_t)}}var At,Mt,Lt,qt={set:Ot,get:zt,has:Et,enforce:function(t){return Et(t)?zt(t):Ot(t,{})},getterFor:function(t){return function(e){var r;if(!b(e)||(r=zt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},Nt={}.propertyIsEnumerable,Dt=Object.getOwnPropertyDescriptor,Ht={f:Dt&&!Nt.call({1:2},1)?function(t){var e=Dt(this,t);return!!e&&e.enumerable}:Nt},Vt=Object.getOwnPropertyDescriptor,Kt={f:y?Vt:function(t,e){if(t=d(t),e=x(e,!0),k)try{return Vt(t,e)}catch(t){}if(R(t,e))return z(!Ht.f.call(t,e),t[e])}},Wt=r((function(t){var e=qt.get,r=qt.enforce,s=String(String).split("String");(t.exports=function(t,e,i,n){var a,h=!!n&&!!n.unsafe,c=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet;"function"==typeof i&&("string"!=typeof e||R(i,"name")||E(i,"name",e),(a=r(i)).source||(a.source=s.join("string"==typeof e?e:""))),t!==o?(h?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=i:E(t,e,i)):c?t[e]=i:F(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Ft(this)}))})),Bt=ct.concat("length","prototype"),Ut={f:Object.getOwnPropertyNames||function(t){return ht(t,Bt)}},Yt={f:Object.getOwnPropertySymbols},Xt=q("Reflect","ownKeys")||function(t){var e=Ut.f(S(t)),r=Yt.f;return r?e.concat(r(t)):e},Jt=function(t,e){for(var r=Xt(e),s=O.f,i=Kt.f,n=0;n<r.length;n++){var o=r[n];R(t,o)||s(t,o,i(e,o))}},Qt=/#|\.prototype\./,Zt=function(t,e){var r=te[$t(t)];return r==re||r!=ee&&("function"==typeof e?h(e):!!e)},$t=Zt.normalize=function(t){return String(t).replace(Qt,".").toLowerCase()},te=Zt.data={},ee=Zt.NATIVE="N",re=Zt.POLYFILL="P",se=Zt,ie=Kt.f,ne=!h((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),oe=dt("IE_PROTO"),ae=Object.prototype,he=ne?Object.getPrototypeOf:function(t){return t=Object(p(t)),R(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ae:null},ce=Q("iterator"),ue=!1;[].keys&&("next"in(Lt=[].keys())?(Mt=he(he(Lt)))!==Object.prototype&&(At=Mt):ue=!0),(null==At||h((function(){var t={};return At[ce].call(t)!==t})))&&(At={}),R(At,ce)||E(At,ce,(function(){return this}));var le={IteratorPrototype:At,BUGGY_SAFARI_ITERATORS:ue},fe=O.f,pe=Q("toStringTag"),de=function(t,e,r){t&&!R(t=r?t:t.prototype,pe)&&fe(t,pe,{configurable:!0,value:e})},ye=le.IteratorPrototype,be=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,s){return S(r),function(t){if(!b(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(s),e?t.call(r,s):r.__proto__=s,r}}():void 0),ge=le.IteratorPrototype,me=le.BUGGY_SAFARI_ITERATORS,ve=Q("iterator"),ke="keys",Se="values",xe="entries",we=function(){return this},Oe="Array Iterator",ze=qt.set,Ee=qt.getterFor(Oe),Fe=function(t,e,r,s,i,n,a){!function(t,e,r){var s=e+" Iterator";t.prototype=vt(ye,{next:z(1,r)}),de(t,s,!1)}(r,e,s);var h,c,u,l=function(t){if(t===i&&b)return b;if(!me&&t in d)return d[t];switch(t){case ke:case Se:case xe:return function(){return new r(this,t)}}return function(){return new r(this)}},f=e+" Iterator",p=!1,d=t.prototype,y=d[ve]||d["@@iterator"]||i&&d[i],b=!me&&y||l(i),g="Array"==e&&d.entries||y;if(g&&(h=he(g.call(new t)),ge!==Object.prototype&&h.next&&(he(h)!==ge&&(be?be(h,ge):"function"!=typeof h[ve]&&E(h,ve,we)),de(h,f,!0))),i==Se&&y&&y.name!==Se&&(p=!0,b=function(){return y.call(this)}),d[ve]!==b&&E(d,ve,b),i)if(c={values:l(Se),keys:n?b:l(ke),entries:l(xe)},a)for(u in c)(me||p||!(u in d))&&Wt(d,u,c[u]);else!function(t,e){var r,s,i,n,a,h=t.target,c=t.global,u=t.stat;if(r=c?o:u?o[h]||F(h,{}):(o[h]||{}).prototype)for(s in e){if(n=e[s],i=t.noTargetGet?(a=ie(r,s))&&a.value:r[s],!se(c?s:h+(u?".":"#")+s,t.forced)&&void 0!==i){if(typeof n==typeof i)continue;Jt(n,i)}(t.sham||i&&i.sham)&&E(n,"sham",!0),Wt(r,s,n,t)}}({target:e,proto:!0,forced:me||p},c);return c}(Array,"Array",(function(t,e){ze(this,{type:Oe,target:d(t),index:0,kind:e})}),(function(){var t=Ee(this),e=t.target,r=t.kind,s=t.index++;return!e||s>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:s,done:!1}:"values"==r?{value:e[s],done:!1}:{value:[s,e[s]],done:!1}}),"values");xt("keys"),xt("values"),xt("entries");var Ie=Q("iterator"),Te=Q("toStringTag"),je=Fe.values;for(var Ce in a){var Re=o[Ce],Pe=Re&&Re.prototype;if(Pe){if(Pe[Ie]!==je)try{E(Pe,Ie,je)}catch(t){Pe[Ie]=je}if(Pe[Te]||E(Pe,Te,Ce),a[Ce])for(var Ge in Fe)if(Pe[Ge]!==Fe[Ge])try{E(Pe,Ge,Fe[Ge])}catch(t){Pe[Ge]=Fe[Ge]}}}function _e(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ae(t){return!(!t||!_e(t[Symbol.iterator]))}function Me(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Le(t,e){return t===e}class qe{constructor(t,e){this.has=t,this.value=e,Object.freeze(this)}static get none(){return De}get size(){return this.has?1:0}static some(t){return Ne(t)}*[Symbol.iterator](){this.has&&(yield this.value)}}const Ne=t=>new qe(!0,t),De=new qe(!1,void 0);function He(t,e=0,r=0){const s=1&(e=e>0?Math.min(e,t.length):t.length),i=e-s;let n=r|=0,o=0,a=0;for(;a<i;)o=65535&t.charCodeAt(a++)|(65535&t.charCodeAt(a++))<<16,o*=3432918353,o=o<<15|o>>>17,o*=461845907,n^=o,n=n<<13|n>>>19,n*=5,n+=3864292196;return s&&(o^=65535&t.charCodeAt(a),o*=3432918353,o=o<<15|o>>>17,o*=461845907,n^=o),n^=e,n^=n>>>16,n*=2246822507,n^=n>>>13,n*=3266489909,n^=n>>>16,0|n}function Ve(t){switch(typeof t){case"undefined":return 0;case"boolean":return t?1:0;case"string":return He(t);case"number":return Number.isFinite(t)?Number.isSafeInteger(t)?0|t:He(t.toString()):0;case"bigint":case"symbol":case"function":return He(t.toString());case"object":default:{if(null===t)return 0;if(t.hashCode)return _e(t.hashCode)?Ve(t.hashCode(t)):Ve(t.hashCode);if(t instanceof Date)return t.getTime();if(t instanceof RegExp)return He(t.toString());if(t instanceof qe)return t.has?31*Ve(t.value):0;if(t.hasOwnProperty("_mootable_hashCode"))return Ve(t._mootable_hashCode);const e=Ke++;return Object.defineProperty(t,"_mootable_hashCode",{value:e}),e}}}let Ke=0;function We(t){switch(typeof t){case"object":if(t){if(t instanceof RegExp)return(t,e)=>e instanceof RegExp&&t.toString()===e.toString();if(t instanceof Date)return(t,e)=>e instanceof Date&&t.getTime()===e.getTime();if(t instanceof qe){if(t.has){const e=We(t.value);return(t,r)=>!!r.has&&e(t.value,r.value)}return(t,e)=>!e.has}if(_e(t.equals))return(t,e)=>t.equals(e,t)}return Le;case"number":case"bigint":return Me;default:return Le}}function Be(t,e){if(e){let r=e.hash,s=e.equals;return _e(r)&&(r=r(t)),Number.isSafeInteger(r)||(r=Ve(t)),_e(s)||(s=We(t)),{hash:r,equals:s}}const r={};switch(typeof t){case"undefined":return r.hash=0,r.equals=Le,r;case"boolean":return r.hash=t?1:0,r.equals=Le,r;case"string":return r.hash=He(t),r.equals=Le,r;case"number":return Number.isFinite(t)?Number.isSafeInteger(t)?(r.hash=0|t,r.equals=Me,r):(r.hash=He(t.toString()),r.equals=Me,r):(r.hash=0,r.equals=Me,r);case"bigint":return r.hash=He(t.toString()),r.equals=Me,r;case"symbol":case"function":return r.hash=He(t.toString()),r.equals=Le,r;case"object":default:{if(null===t)return r.hash=0,r.equals=Le,r;if(r.equals=We(t),t.hashCode)return _e(t.hashCode)?(r.hash=Ve(t.hashCode(t)),r):(r.hash=Ve(t.hashCode),r);if(t instanceof Date)return r.hash=t.getTime(),r;if(t instanceof RegExp)return r.hash=He(t.toString()),r;if(t instanceof qe)return t.has?(r.hash=31*Ve(t.value),r):(r.hash=0,r);if(t.hasOwnProperty("_mootable_hashCode"))return r.hash=Ve(t._mootable_hashCode),r;const e=Ke++;return Object.defineProperty(t,"_mootable_hashCode",{value:e}),r.hash=e,r}}}class Ue{constructor(t,e,r){this.size=0,this.contents=[],this.map=t,this.parent=e,this.hash=r}hashConflicts(t){return t!==this.hash}get(t,e){if(0!==this.size){const r=e.equals;for(const e of this.contents)if(e&&r(t,e[0]))return e[1]}}optionalGet(t,e){if(0!==this.size){const r=e.equals,s=this.contents.find((e=>r(t,e[0])));if(s)return Ne(s[1])}return De}set(t,e,r){const s=r.equals;for(const i of this.contents)if(s(t,i[0]))return void this.updateEntry(i,e,r);this.createEntry(t,e,r)}emplace(t,e,r){const s=r.equals;for(const i of this.contents)if(s(t,i[0])){const s="update"in e?e.update(i[1],t,this.map):e.insert(t,this.map);return this.updateEntry(i,s,r),s}const i=e.insert(t,this.map);return this.createEntry(t,i,r),i}createEntry(t,e,r){const s=[t,e];return s.parent=this,this.contents.push(s),this.size+=1,s}updateEntry(t,e,r){t[1]=e}deleteEntry(t){const e=this.contents.indexOf(t);if(-1!==e){this.deleteIndex(e);let t=this.parent;for(;t;)t.size-=1,t=this.parent}}deleteIndex(t){return this.size-=1,0===t?this.contents.shift():t===this.size?this.contents.pop():this.contents.splice(t,1)[0]}has(t,e){if(0!==this.size){const r=e.equals;return this.contents.some((e=>r(t,e[0])))}return!1}delete(t,e){const r=e.equals,s=this.contents.findIndex((e=>r(t,e[0])));return-1!==s&&(this.deleteIndex(s),!0)}*[Symbol.iterator](){for(const t of this.contents)yield t.slice()}*entriesRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t].slice()}*keys(){for(const t of this.contents)yield t[0]}*values(){for(const t of this.contents)yield t[1]}*keysRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t][0]}*valuesRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t][1]}}const Ye=127;class Xe{constructor(t){this.map=t,this.buckets=[],this.size=0}clear(){this.buckets=[],this.size=0}bucketFor(t){const e=t&Ye;if(e<this.buckets.length)return this.buckets[e]}set(t,e,r){const s=r.hash,i=s&Ye;let n=this.buckets[i];if(!n)return n=this.map.createContainer(this,s),n.createEntry(t,e,r),this.buckets[i]=n,void(this.size+=1);n.hashConflicts(s)&&(n=new Je(this.map,this,4,7).replacing(n),this.buckets[i]=n),this.size-=n.size,n.set(t,e,r),this.size+=n.size}emplace(t,e,r){const s=r.hash,i=s&Ye;let n=this.buckets[i];n?n.hashConflicts(s)&&(n=new Je(this.map,this,4,7).replacing(n),this.buckets[i]=n):(n=this.map.createContainer(this,s),this.buckets[i]=n),this.size-=n.size;const o=n.emplace(t,e,r);return this.size+=n.size,o}delete(t,e){const r=e.hash&Ye,s=this.buckets[r];if(s){if(s.delete(t,e))return this.size-=1,!0}return!1}get(t,e){const r=e.hash,s=this.bucketFor(r);if(s)return s.get(t,e)}optionalGet(t,e){const r=e.hash,s=this.bucketFor(r);return s?s.optionalGet(t,e):De}has(t,e){const r=e.hash,s=this.bucketFor(r);return!!s&&s.has(t,e)}*[Symbol.iterator](){for(const t of this.buckets)t&&(yield*t)}*entriesRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.entriesRight())}}*keys(){for(const t of this.buckets)t&&(yield*t.keys())}*values(){for(const t of this.buckets)t&&(yield*t.values())}*keysRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.keysRight())}}*valuesRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.valuesRight())}}}class Je{constructor(t,e,r,s){this.map=t,this.parent=e,this.buckets=[],this.size=0,this.idxFlags=0,this.depth=r,this.shift=s}hashConflicts(){return!1}clear(){this.size=0,this.buckets=[],this.idxFlags=0}bucketFor(t){const e=this.idxFlags,r=1<<(t>>>this.shift&31),s=Qe(e&r-1);if(e&r)return this.buckets[s]}replacing(t){const e=1<<(t.hash>>>this.shift&31);return this.idxFlags|=e,this.buckets[0]=t,this.size=t.size,t.parent=this,this}set(t,e,r){const s=r.hash,i=this.idxFlags,n=1<<(s>>>this.shift&31),o=Qe(i&n-1);let a;i&n?(a=this.buckets[o],this.depth&&a.hashConflicts(s)&&(a=new Je(this.map,this,this.depth-1,this.shift+5).replacing(a),this.buckets[o]=a),this.size-=a.size,a.set(t,e,r),this.size+=a.size):(a=this.map.createContainer(this,s),a.createEntry(t,e,r),this.buckets.splice(o,0,a),this.idxFlags|=n,this.size+=1)}emplace(t,e,r){const s=r.hash,i=this.idxFlags,n=1<<(s>>>this.shift&31),o=Qe(i&n-1);let a;i&n?(a=this.buckets[o],this.depth&&a.hashConflicts(s)&&(a=new Je(this.map,this,this.depth-1,this.shift+5).replacing(a),this.buckets[o]=a)):(a=this.map.createContainer(this,s),this.buckets.splice(o,0,a),this.idxFlags|=n),this.size-=a.size;const h=a.emplace(t,e,r);return this.size+=a.size,h}delete(t,e){const r=e.hash,s=this.idxFlags,i=1<<(r>>>this.shift&31);if(s&i){const r=Qe(s&i-1),n=this.buckets[r];if(n.delete(t,e))return this.size-=1,0===n.size&&(0===r?this.buckets.shift():this.buckets.length===r+1?this.buckets.pop():this.buckets.splice(r,1),this.idxFlags^=i),!0}return!1}get(t,e){const r=e.hash,s=this.bucketFor(r);if(s)return s.get(t,e)}optionalGet(t,e){const r=e.hash,s=this.bucketFor(r);return s?s.optionalGet(t,e):De}has(t,e){const r=e.hash,s=this.bucketFor(r);return!!s&&s.has(t,e)}*[Symbol.iterator](){for(const t of this.buckets)yield*t}*entriesRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].entriesRight()}*keys(){for(const t of this.buckets)yield*t.keys()}*values(){for(const t of this.buckets)yield*t.values()}*keysRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].keysRight()}*valuesRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].valuesRight()}}const Qe=t=>16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24;class Ze{constructor(t){this.buckets=new Xe(this),t&&this.copy(t)}get size(){return this.buckets.size}get length(){return this.buckets.size}createContainer(t,e){return new Ue(this,t,e)}has(t,e){const r=Be(t,e);return this.buckets.has(t,r)}get(t,e){const r=Be(t,e);return this.buckets.get(t,r)}optionalGet(t,e){const r=Be(t,e);return this.buckets.optionalGet(t,r)}set(t,e,r){const s=Be(t,r);return this.buckets.set(t,e,s),this}emplace(t,e,r){const s=Be(t,r);return this.buckets.emplace(t,e,s)}copy(t){const e=this;if(Ae(t)){for(const[r,s]of t)e.set(r,s);return this}if(_e(t.entries)){for(const[r,s]of t.entries())e.set(r,s);return this}if(_e(t.forEach))return t.forEach((function(t,r){e.set(r,t)})),this;throw new TypeError("HashMap.copy expects an object which is iterable, has an entries iterable function, or has a forEach function on it")}clone(){return new Ze(this)}delete(t,e){const r=Be(t,e);return this.buckets.delete(t,r),this}clear(){return this.buckets.clear(),this}forEach(t,e=this){for(const r of this.entries())t.call(e,r[1],r[0],this);return this}forEachRight(t,e=this){for(const r of this.entriesRight())t.call(e,r[1],r[0],this);return this}*[Symbol.iterator](){yield*this.entries()}*entriesRight(){yield*this.buckets.entriesRight()}*entries(){yield*this.buckets}*keys(){yield*this.buckets.keys()}*values(){yield*this.buckets.values()}*keysRight(){yield*this.buckets.keysRight()}*valuesRight(){yield*this.buckets.valuesRight()}}class $e extends Ze{constructor(t){super(t),0===this.size&&(this.start=void 0,this.end=void 0)}clear(){return this.start=void 0,this.end=void 0,super.clear()}createContainer(t,e){return new tr(this,t,e)}push(t,e,r){const s=Be(t,r);return r&&r.allowOverwriting||(s.forceInsert=!0),this.buckets.set(t,e,s),this}pushEmplace(t,e,r){const s=Be(t,r);return r&&r.allowOverwriting||(s.forceInsert=!0),this.buckets.emplace(t,e,s)}unshift(t,e,r){const s=Be(t,r);return r&&r.allowOverwriting||(s.forceInsert=!0),s.addToStart=!0,this.buckets.set(t,e,s),this}unshiftEmplace(t,e,r){const s=Be(t,r);return r&&r.allowOverwriting||(s.forceInsert=!0),s.addToStart=!0,this.buckets.emplace(t,e,s)}shift(){const t=this.start;if(t)return t.parent.deleteEntry(t),t.slice()}pop(){const t=this.end;if(t)return t.parent.deleteEntry(t),t.slice()}clone(){return new $e(this)}*[Symbol.iterator](){yield*this.entries()}*entries(){let t=this.start;for(;t;)yield t.slice(),t=t.next}*entriesRight(){let t=this.end;for(;t;)yield t.slice(),t=t.previous}*keys(){let t=this.start;for(;t;)yield t[0],t=t.next}*values(){let t=this.start;for(;t;)yield t[1],t=t.next}*keysRight(){let t=this.end;for(;t;)yield t[0],t=t.previous}*valuesRight(){let t=this.end;for(;t;)yield t[1],t=t.previous}}class tr extends Ue{constructor(t,e,r){super(t,e,r)}createEntry(t,e,r){const s=super.createEntry(t,e,r),i=this.map;return r.addToStart&&i.start?(i.start.previous=s,s.next=i.start,i.start=s):i.end?(i.end.next=s,s.previous=i.end,i.end=s):i.end=i.start=s,s}updateEntry(t,e,r){super.updateEntry(t,e,r),r.forceInsert&&(r.addToStart?t!==this.map.start&&(t.next&&(t.next.previous=t.previous),t.previous&&(t.previous.next=t.next,t.previous=void 0),this.map.start.previous=t,t.next=this.map.start,this.map.start=t):t!==this.map.end&&(t.previous&&(t.previous.next=t.next),t.next&&(t.next.previous=t.previous,t.next=void 0),this.map.end.next=t,t.previous=this.map.end,this.map.end=t))}deleteIndex(t){const e=super.deleteIndex(t),r=this.map;e.previous?e.previous.next=e.next:r.start=e.next,e.next?e.next.previous=e.previous:r.end=e.previous}}class er{get size(){let t=0;for(const e of this)t++;return t}static from(t){return t instanceof er?t:new ir(t)}filter(t=(()=>!0),e=this){return new nr(this,t,e)}forEach(t=(()=>{}),e=this){for(const[r,s]of this)t.call(e,s,r,this);return this}collect(t=[]){if(Array.isArray(t))return t.length?t.concat(Array.from(this)):Array.from(this);if(_e(t.set))for(const[e,r]of this)t.set(e,r);else if(_e(t.add))for(const e of this)t.add(e);else for(const[e,r]of this)t[e]=r;return t}every(t=(()=>!0),e=this){for(const[r,s]of this)if(!t.call(e,s,r,this))return!1;return!0}some(t=(()=>!0),e=this){for(const[r,s]of this)if(t.call(e,s,r,this))return!0;return!1}find(t=(()=>!0),e=this){for(const[r,s]of this)if(t.call(e,s,r,this))return s}findIndex(t=((t,e)=>e),e=this){for(const[r,s]of this)if(t.call(e,s,r,this))return r}indexOf(t,e=We(t)){for(const[r,s]of this)if(e(t,s))return r}has(t,e=We(t)){return this.some(((r,s)=>e(s,t)))}get(t,e=We(t)){return this.find(((r,s)=>e(t,s)))}optionalGet(t,e=We(t)){let r=!1;const s=this.find(((s,i)=>!!e(t,i)&&(r=!0,!0)));return r?Ne(s):De}reduce(t=((t,e)=>e),e,r=this){let s=e;for(const[e,i]of this)s=t.call(r,s,i,e,this);return s}mapKeys(t=((t,e)=>e),e=this){return new or(this,t,e)}mapValues(t=(t=>t),e=this){return new ar(this,t,e)}mapEntries(t=((t,e)=>[e,t]),e=this){if(Array.isArray(t)){if(1===t.length&&_e(t[0]))return this.mapKeys(t[0],e);if(t.length>1){if(_e(t[0])){if(_e(t[1])){return new hr(this,((r,s,i)=>[t[0].call(e,r,s,i),t[1].call(e,r,s,i)]),this)}return this.mapKeys(t[0],e)}if(_e(t[1]))return this.mapValues(t[1],e)}}else if(_e(t))return new hr(this,t,e);throw new TypeError("MapIterable.mapEntries expects a function or an array of functions")}map(t=((t,e)=>[e,t]),e=this){if(Array.isArray(t))return this.mapEntries(t,e);if(_e(t))return new pr(this,t,e);throw new TypeError("MapIterable.map expects a function or an array of functions")}concat(t){return t?t instanceof er||t instanceof Map?this.concatMap(t):new ur(this,rr.from(t)):this}concatMap(t){return t?new cr(this,er.from(t)):this}keys(){return new fr(this)}values(){return new lr(this)}entries(){return this}}class rr{get size(){let t=0;for(const e of this)t++;return t}static from(t){return t instanceof rr?t:new sr(t)}filter(t=(()=>!0),e=this){return new yr(this,t,e)}forEach(t=(()=>{}),e=this){for(const r of this)t.call(e,r,r,this)}collect(t=[]){if(Array.isArray(t))return t.length?t.concat(Array.from(this)):Array.from(this);if(_e(t.add))for(const e of this)t.add(e);else if(_e(t.set))for(const e of this)t.set(e);return t}reduce(t=((t,e)=>e),e,r=this){let s=e;for(const e of this)s=t.call(r,s,e,e,this);return s}every(t=(()=>!0),e=this){for(const r of this)if(!t.call(e,r,r,this))return!1;return!0}some(t=(()=>!0),e=this){for(const r of this)if(t.call(e,r,this))return!0;return!1}has(t,e=We(t)){return this.some((r=>e(r,t)))}find(t=(()=>!0),e=this){for(const r of this)if(t.call(e,r,r,this))return r}map(t=(t=>t),e=this){return new dr(this,t,e)}concat(t=[]){return new ur(this,rr.from(t))}values(){return this}keys(){return this}entries(){return er.from(this.map((t=>[t,t])))}}class sr extends rr{constructor(t,e){super(),this.iterable=t,this.ctx=e||t}get size(){return this.iterable.length?this.iterable.length:this.iterable.size?this.iterable.size:super.size}has(t,e=We(t)){return this.iterable instanceof Set||this.iterable instanceof rr?this.iterable.has(t,e):super.has(t,e)}*[Symbol.iterator](){yield*this.iterable}}class ir extends er{constructor(t,e){super(),this.iterable=t,this.ctx=e||t}get size(){return this.iterable.length?this.iterable.length:this.iterable.size?this.iterable.size:super.size}*[Symbol.iterator](){yield*this.iterable}has(t){return this.optionalGet(t).has}optionalGet(t){return _e(this.iterable.optionalGet)?this.iterable.optionalGet(t):_e(this.iterable.has)?this.iterable.has(t)?(_e(this.iterable.get)&&Ne(this.iterable.get(t)),Ne(super.get(t))):De:super.optionalGet(t)}get(t){return this.optionalGet(t).value}}class nr extends ir{constructor(t,e,r){super(t,r),this.filterPredicate=e}get size(){let t=0;for(const e of this)t++;return t}*[Symbol.iterator](){for(let[t,e]of this.iterable)this.filterPredicate.call(this.ctx,e,t,this)&&(yield[t,e])}optionalGet(t){const e=super.optionalGet(t);return e.has&&!this.filterPredicate.call(this.ctx,e.value,t,this)?De:e}has(t){return this.optionalGet(t).has}get(t){return this.optionalGet(t).value}}class or extends ir{constructor(t,e,r){super(t,r),this.mapFunction=e}*[Symbol.iterator](){for(let[t,e]of this.iterable)yield[this.mapFunction.call(this.ctx,e,t,this),e]}}class ar extends ir{constructor(t,e,r){super(t,r),this.mapFunction=e}*[Symbol.iterator](){for(let[t,e]of this.iterable)yield[t,this.mapFunction.call(this.ctx,e,t,this)]}optionalGet(t){const e=super.optionalGet(t);return e.has?Ne(this.mapFunction.call(this.ctx,e.value,t,this)):e}}class hr extends ir{constructor(t,e,r){super(t,r),this.mapFunction=e}*[Symbol.iterator](){for(let[t,e]of this.iterable){const[r,s]=this.mapFunction.call(this.ctx,e,t,this);yield[r,s]}}get(t){if(this.iterable.has(t)){const e=this.iterable.get(t);return this.mapFunction.call(this.ctx,e,t,this)[1]}}}class cr extends er{constructor(t,e){super(),this.iterable=t,this.otherIterable=e}get size(){return this.iterable.size+this.otherIterable.size}*[Symbol.iterator](){yield*this.iterable,yield*this.otherIterable}optionalGet(t){const e=this.iterable.optionalGet(t);return e.has?e:this.otherIterable.optionalGet(t)}has(t){return this.optionalGet(t).has}get(t){return this.optionalGet(t).value}}class ur extends rr{constructor(t,e){super(),this.iterable=t,this.otherIterable=e}get size(){return this.iterable.size+this.otherIterable.size}has(t,e=We(t)){return this.iterable.has(t,e)||this.otherIterable.has(t,e)}*[Symbol.iterator](){yield*this.iterable,yield*this.otherIterable}}class lr extends sr{constructor(t){super(t)}*[Symbol.iterator](){for(let[,t]of this.iterable)yield t}has(t,e=We(t)){return Array.isArray(t),this.iterable.some((r=>e(t,r)))}}class fr extends sr{constructor(t){super(t)}*[Symbol.iterator](){for(let[t]of this.iterable)yield t}has(t){return this.iterable.optionalGet(t).has}}class pr extends sr{constructor(t,e,r){super(t,r),this.mapFunction=e}*[Symbol.iterator](){for(let[t,e]of this.iterable)yield this.mapFunction.call(this.ctx,e,t,this)}has(t,e=We(t)){return this.some((r=>e(t,r)))}}class dr extends sr{constructor(t,e,r){super(t,r),this.mapFunction=e}*[Symbol.iterator](){for(let t of this.iterable)yield this.mapFunction.call(this.ctx,t,t,this)}has(t,e=We(t)){return this.some((r=>e(t,r)))}}class yr extends sr{constructor(t,e,r){super(t,r),this.filterPredicate=e}get size(){let t=0;for(const e of this)t++;return t}*[Symbol.iterator](){for(let t of this.iterable)this.filterPredicate.call(this.ctx,t,t,this)&&(yield t)}has(t,e=We(t)){return!!this.iterable.has(t,e)&&this.filterPredicate.call(this.ctx,t,t,this)}}const br={HashMap:Ze,LinkedHashMap:$e,MapIterable:er,SetIterable:rr,Utils:{hash:He,isFunction:_e,isIterable:Ae,isString:function(t){return!(!t||!("string"==typeof t||t instanceof String))},equalsAndHash:Be,hashCodeFor:Ve,equalsFor:We,some:Ne,none:De,Option:qe}};t.HashMap=Ze,t.LinkedHashMap=$e,t.Mootable=br,t.default=Ze,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=hashmap.umd.min.js.map
