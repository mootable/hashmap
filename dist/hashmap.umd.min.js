!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Mootable={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){var e={exports:{}};return t(e,e.exports),e.exports}var s,r,i=function(t){return t&&t.Math==Math&&t},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},c=function(t){try{return!!t()}catch(t){return!0}},u={}.toString,h=function(t){return u.call(t).slice(8,-1)},l="".split,f=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?l.call(t,""):Object(t)}:Object,p=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},d=function(t){return f(p(t))},y=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=o.document,v=b(g)&&b(g.createElement),m=function(t){return v?g.createElement(t):{}},k=!y&&!c((function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a})),S=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},O=function(t,e){if(!b(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!b(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!b(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!b(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,w={f:y?x:function(t,e,n){if(S(t),e=O(e,!0),S(n),k)try{return x(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},T=y?function(t,e,n){return w.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},E=function(t,e){try{T(o,t,e)}catch(n){o[t]=e}return e},j="__core-js_shared__",z=o[j]||E(j,{}),C=n((function(t){(t.exports=function(t,e){return z[t]||(z[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),L={}.hasOwnProperty,F=function(t,e){return L.call(t,e)},_=0,P=Math.random(),q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++_+P).toString(36)},I="process"==h(o.process),M=o,A=function(t){return"function"==typeof t?t:void 0},N=function(t,e){return arguments.length<2?A(M[t])||A(o[t]):M[t]&&M[t][e]||o[t]&&o[t][e]},G=N("navigator","userAgent")||"",D=o.process,H=D&&D.versions,K=H&&H.v8;K?r=(s=K.split("."))[0]+s[1]:G&&(!(s=G.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=G.match(/Chrome\/(\d+)/))&&(r=s[1]);var V,U=r&&+r,W=!!Object.getOwnPropertySymbols&&!c((function(){return!Symbol.sham&&(I?38===U:U>37&&U<41)})),B=W&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Y=C("wks"),X=o.Symbol,J=B?X:X&&X.withoutSetter||q,Q=function(t){return F(Y,t)&&(W||"string"==typeof Y[t])||(W&&F(X,t)?Y[t]=X[t]:Y[t]=J("Symbol."+t)),Y[t]},Z=Math.ceil,$=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?$:Z)(t)},et=Math.min,nt=Math.max,st=Math.min,rt=function(t){return function(e,n,s){var r,i,o=d(e),a=(r=o.length)>0?et(tt(r),9007199254740991):0,c=function(t,e){var n=tt(t);return n<0?nt(n+e,0):st(n,e)}(s,a);if(t&&n!=n){for(;a>c;)if((i=o[c++])!=i)return!0}else for(;a>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}},it={includes:rt(!0),indexOf:rt(!1)},ot={},at=it.indexOf,ct=function(t,e){var n,s=d(t),r=0,i=[];for(n in s)!F(ot,n)&&F(s,n)&&i.push(n);for(;e.length>r;)F(s,n=e[r++])&&(~at(i,n)||i.push(n));return i},ut=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=Object.keys||function(t){return ct(t,ut)},lt=y?Object.defineProperties:function(t,e){S(t);for(var n,s=ht(e),r=s.length,i=0;r>i;)w.f(t,n=s[i++],e[n]);return t},ft=N("document","documentElement"),pt=C("keys"),dt=function(t){return pt[t]||(pt[t]=q(t))},yt=dt("IE_PROTO"),bt=function(){},gt=function(t){return"<script>"+t+"</"+"script>"},vt=function(){try{V=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;vt=V?function(t){t.write(gt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(V):((e=m("iframe")).style.display="none",ft.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(gt("document.F=Object")),t.close(),t.F);for(var n=ut.length;n--;)delete vt.prototype[ut[n]];return vt()};ot[yt]=!0;var mt=Object.create||function(t,e){var n;return null!==t?(bt.prototype=S(t),n=new bt,bt.prototype=null,n[yt]=t):n=vt(),void 0===e?n:lt(n,e)},kt=Q("unscopables"),St=Array.prototype;null==St[kt]&&w.f(St,kt,{configurable:!0,value:mt(null)});var Ot=function(t){St[kt][t]=!0},xt=Function.toString;"function"!=typeof z.inspectSource&&(z.inspectSource=function(t){return xt.call(t)});var wt,Rt,Tt,Et=z.inspectSource,jt=o.WeakMap,zt="function"==typeof jt&&/native code/.test(Et(jt)),Ct=o.WeakMap;if(zt){var Lt=z.state||(z.state=new Ct),Ft=Lt.get,_t=Lt.has,Pt=Lt.set;wt=function(t,e){return e.facade=t,Pt.call(Lt,t,e),e},Rt=function(t){return Ft.call(Lt,t)||{}},Tt=function(t){return _t.call(Lt,t)}}else{var qt=dt("state");ot[qt]=!0,wt=function(t,e){return e.facade=t,T(t,qt,e),e},Rt=function(t){return F(t,qt)?t[qt]:{}},Tt=function(t){return F(t,qt)}}var It,Mt,At,Nt={set:wt,get:Rt,has:Tt,enforce:function(t){return Tt(t)?Rt(t):wt(t,{})},getterFor:function(t){return function(e){var n;if(!b(e)||(n=Rt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Gt={}.propertyIsEnumerable,Dt=Object.getOwnPropertyDescriptor,Ht={f:Dt&&!Gt.call({1:2},1)?function(t){var e=Dt(this,t);return!!e&&e.enumerable}:Gt},Kt=Object.getOwnPropertyDescriptor,Vt={f:y?Kt:function(t,e){if(t=d(t),e=O(e,!0),k)try{return Kt(t,e)}catch(t){}if(F(t,e))return R(!Ht.f.call(t,e),t[e])}},Ut=n((function(t){var e=Nt.get,n=Nt.enforce,s=String(String).split("String");(t.exports=function(t,e,r,i){var a,c=!!i&&!!i.unsafe,u=!!i&&!!i.enumerable,h=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof e||F(r,"name")||T(r,"name",e),(a=n(r)).source||(a.source=s.join("string"==typeof e?e:""))),t!==o?(c?!h&&t[e]&&(u=!0):delete t[e],u?t[e]=r:T(t,e,r)):u?t[e]=r:E(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Et(this)}))})),Wt=ut.concat("length","prototype"),Bt={f:Object.getOwnPropertyNames||function(t){return ct(t,Wt)}},Yt={f:Object.getOwnPropertySymbols},Xt=N("Reflect","ownKeys")||function(t){var e=Bt.f(S(t)),n=Yt.f;return n?e.concat(n(t)):e},Jt=function(t,e){for(var n=Xt(e),s=w.f,r=Vt.f,i=0;i<n.length;i++){var o=n[i];F(t,o)||s(t,o,r(e,o))}},Qt=/#|\.prototype\./,Zt=function(t,e){var n=te[$t(t)];return n==ne||n!=ee&&("function"==typeof e?c(e):!!e)},$t=Zt.normalize=function(t){return String(t).replace(Qt,".").toLowerCase()},te=Zt.data={},ee=Zt.NATIVE="N",ne=Zt.POLYFILL="P",se=Zt,re=Vt.f,ie=!c((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),oe=dt("IE_PROTO"),ae=Object.prototype,ce=ie?Object.getPrototypeOf:function(t){return t=Object(p(t)),F(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ae:null},ue=Q("iterator"),he=!1;[].keys&&("next"in(At=[].keys())?(Mt=ce(ce(At)))!==Object.prototype&&(It=Mt):he=!0),(null==It||c((function(){var t={};return It[ue].call(t)!==t})))&&(It={}),F(It,ue)||T(It,ue,(function(){return this}));var le={IteratorPrototype:It,BUGGY_SAFARI_ITERATORS:he},fe=w.f,pe=Q("toStringTag"),de=function(t,e,n){t&&!F(t=n?t:t.prototype,pe)&&fe(t,pe,{configurable:!0,value:e})},ye=le.IteratorPrototype,be=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,s){return S(n),function(t){if(!b(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(s),e?t.call(n,s):n.__proto__=s,n}}():void 0),ge=le.IteratorPrototype,ve=le.BUGGY_SAFARI_ITERATORS,me=Q("iterator"),ke="keys",Se="values",Oe="entries",xe=function(){return this},we="Array Iterator",Re=Nt.set,Te=Nt.getterFor(we),Ee=function(t,e,n,s,r,i,a){!function(t,e,n){var s=e+" Iterator";t.prototype=mt(ye,{next:R(1,n)}),de(t,s,!1)}(n,e,s);var c,u,h,l=function(t){if(t===r&&b)return b;if(!ve&&t in d)return d[t];switch(t){case ke:case Se:case Oe:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,y=d[me]||d["@@iterator"]||r&&d[r],b=!ve&&y||l(r),g="Array"==e&&d.entries||y;if(g&&(c=ce(g.call(new t)),ge!==Object.prototype&&c.next&&(ce(c)!==ge&&(be?be(c,ge):"function"!=typeof c[me]&&T(c,me,xe)),de(c,f,!0))),r==Se&&y&&y.name!==Se&&(p=!0,b=function(){return y.call(this)}),d[me]!==b&&T(d,me,b),r)if(u={values:l(Se),keys:i?b:l(ke),entries:l(Oe)},a)for(h in u)(ve||p||!(h in d))&&Ut(d,h,u[h]);else!function(t,e){var n,s,r,i,a,c=t.target,u=t.global,h=t.stat;if(n=u?o:h?o[c]||E(c,{}):(o[c]||{}).prototype)for(s in e){if(i=e[s],r=t.noTargetGet?(a=re(n,s))&&a.value:n[s],!se(u?s:c+(h?".":"#")+s,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;Jt(i,r)}(t.sham||r&&r.sham)&&T(i,"sham",!0),Ut(n,s,i,t)}}({target:e,proto:!0,forced:ve||p},u);return u}(Array,"Array",(function(t,e){Re(this,{type:we,target:d(t),index:0,kind:e})}),(function(){var t=Te(this),e=t.target,n=t.kind,s=t.index++;return!e||s>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:s,done:!1}:"values"==n?{value:e[s],done:!1}:{value:[s,e[s]],done:!1}}),"values");Ot("keys"),Ot("values"),Ot("entries");var je=Q("iterator"),ze=Q("toStringTag"),Ce=Ee.values;for(var Le in a){var Fe=o[Le],_e=Fe&&Fe.prototype;if(_e){if(_e[je]!==Ce)try{T(_e,je,Ce)}catch(t){_e[je]=Ce}if(_e[ze]||T(_e,ze,Le),a[Le])for(var Pe in Ee)if(_e[Pe]!==Ee[Pe])try{T(_e,Pe,Ee[Pe])}catch(t){_e[Pe]=Ee[Pe]}}}function qe(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ie(t){return!(!t||!qe(t[Symbol.iterator]))}function Me(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Ae(t,e){return t===e}class Ne{constructor(t,e){this.has=t,this.value=e,Object.freeze(this)}static get none(){return De}get size(){return this.has?1:0}static some(t){return Ge(t)}*[Symbol.iterator](){this.has&&(yield this.value)}}const Ge=t=>new Ne(!0,t),De=new Ne(!1,void 0);function He(t,e=0,n=0){const s=1&(e=e>0?Math.min(e,t.length):t.length),r=e-s;let i=n|=0,o=0,a=0;for(;a<r;)o=65535&t.charCodeAt(a++)|(65535&t.charCodeAt(a++))<<16,o*=3432918353,o=o<<15|o>>>17,o*=461845907,i^=o,i=i<<13|i>>>19,i*=5,i+=3864292196;return s&&(o^=65535&t.charCodeAt(a),o*=3432918353,o=o<<15|o>>>17,o*=461845907,i^=o),i^=e,i^=i>>>16,i*=2246822507,i^=i>>>13,i*=3266489909,i^=i>>>16,0|i}function Ke(t){switch(typeof t){case"undefined":return 0;case"boolean":return t?1:0;case"string":return He(t);case"number":return Number.isFinite(t)?Number.isSafeInteger(t)?0|t:He(t.toString()):0;case"bigint":case"symbol":case"function":return He(t.toString());case"object":default:{if(null===t)return 0;if(t.hashCode)return qe(t.hashCode)?Ke(t.hashCode(t)):Ke(t.hashCode);if(t instanceof Date)return t.getTime();if(t instanceof RegExp)return He(t.toString());if(t instanceof Ne)return t.has?31*Ke(t.value):0;if(t.hasOwnProperty("_mootable_hashCode"))return Ke(t._mootable_hashCode);const e=Ve++;return Object.defineProperty(t,"_mootable_hashCode",{value:e}),e}}}let Ve=0;function Ue(t){switch(typeof t){case"object":if(t){if(t instanceof RegExp)return(t,e)=>e instanceof RegExp&&t.toString()===e.toString();if(t instanceof Date)return(t,e)=>e instanceof Date&&t.getTime()===e.getTime();if(t instanceof Ne){if(t.has){const e=Ue(t.value);return(t,n)=>!!n.has&&e(t.value,n.value)}return(t,e)=>!e.has}if(qe(t.equals))return(t,e)=>t.equals(e,t)}return Ae;case"number":case"bigint":return Me;default:return Ae}}function We(t,e){if(e){let n=e.hash,s=e.equals;return qe(n)&&(n=n(t)),Number.isSafeInteger(n)||(n=Ke(t)),qe(s)||(s=Ue(t)),{hash:n,equals:s}}const n={};switch(typeof t){case"undefined":return n.hash=0,n.equals=Ae,n;case"boolean":return n.hash=t?1:0,n.equals=Ae,n;case"string":return n.hash=He(t),n.equals=Ae,n;case"number":return Number.isFinite(t)?Number.isSafeInteger(t)?(n.hash=0|t,n.equals=Me,n):(n.hash=He(t.toString()),n.equals=Me,n):(n.hash=0,n.equals=Me,n);case"bigint":return n.hash=He(t.toString()),n.equals=Me,n;case"symbol":case"function":return n.hash=He(t.toString()),n.equals=Ae,n;case"object":default:{if(null===t)return n.hash=0,n.equals=Ae,n;if(n.equals=Ue(t),t.hashCode)return qe(t.hashCode)?(n.hash=Ke(t.hashCode(t)),n):(n.hash=Ke(t.hashCode),n);if(t instanceof Date)return n.hash=t.getTime(),n;if(t instanceof RegExp)return n.hash=He(t.toString()),n;if(t instanceof Ne)return t.has?(n.hash=31*Ke(t.value),n):(n.hash=0,n);if(t.hasOwnProperty("_mootable_hashCode"))return n.hash=Ke(t._mootable_hashCode),n;const e=Ve++;return Object.defineProperty(t,"_mootable_hashCode",{value:e}),n.hash=e,n}}}class Be{constructor(t,e,n){this.size=0,this.contents=[],this.map=t,this.parent=e,this.hash=n}hashConflicts(t){return t!==this.hash}get(t,e){if(0!==this.size){const n=e.equals;for(const e of this.contents)if(e&&n(t,e[0]))return e[1]}}optionalGet(t,e){if(0!==this.size){const n=e.equals,s=this.contents.find((e=>n(t,e[0])));if(s)return Ge(s[1])}return De}set(t,e,n){const s=n.equals;for(const r of this.contents)if(s(t,r[0]))return void this.updateEntry(r,e,n);this.createEntry(t,e,n)}emplace(t,e,n){const s=n.equals;for(const r of this.contents)if(s(t,r[0])){const s="update"in e?e.update(r[1],t,this.map):e.insert(t,this.map);return this.updateEntry(r,s,n),s}const r=e.insert(t,this.map);return this.createEntry(t,r,n),r}createEntry(t,e,n){const s=[t,e];return s.parent=this,this.contents.push(s),this.size+=1,s}updateEntry(t,e,n){t[1]=e}deleteEntry(t){const e=this.contents.indexOf(t);if(-1!==e){this.deleteIndex(e);let t=this.parent;for(;t;)t.size-=1,t=t.parent}}deleteIndex(t){return this.size-=1,0===t?this.contents.shift():t===this.size?this.contents.pop():this.contents.splice(t,1)[0]}has(t,e){if(0!==this.size){const n=e.equals;return this.contents.some((e=>n(t,e[0])))}return!1}delete(t,e){const n=e.equals,s=this.contents.findIndex((e=>n(t,e[0])));return-1!==s&&(this.deleteIndex(s),!0)}*[Symbol.iterator](){for(const t of this.contents)yield t.slice()}*entriesRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t].slice()}*keys(){for(const t of this.contents)yield t[0]}*values(){for(const t of this.contents)yield t[1]}*keysRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t][0]}*valuesRight(){for(let t=this.contents.length-1;t>=0;t--)yield this.contents[t][1]}}const Ye=127;class Xe{constructor(t){this.map=t,this.buckets=[],this.size=0}clear(){this.buckets=[],this.size=0}bucketFor(t){const e=t&Ye;if(e<this.buckets.length)return this.buckets[e]}set(t,e,n){const s=n.hash,r=s&Ye;let i=this.buckets[r];if(!i)return i=this.map.createContainer(this,s),i.createEntry(t,e,n),this.buckets[r]=i,void(this.size+=1);i.hashConflicts(s)&&(i=new Je(this.map,this,4,7).replacing(i),this.buckets[r]=i),this.size-=i.size,i.set(t,e,n),this.size+=i.size}emplace(t,e,n){const s=n.hash,r=s&Ye;let i=this.buckets[r];i?i.hashConflicts(s)&&(i=new Je(this.map,this,4,7).replacing(i),this.buckets[r]=i):(i=this.map.createContainer(this,s),this.buckets[r]=i),this.size-=i.size;const o=i.emplace(t,e,n);return this.size+=i.size,o}delete(t,e){const n=e.hash&Ye,s=this.buckets[n];if(s){if(s.delete(t,e))return this.size-=1,!0}return!1}get(t,e){const n=e.hash,s=this.bucketFor(n);if(s)return s.get(t,e)}optionalGet(t,e){const n=e.hash,s=this.bucketFor(n);return s?s.optionalGet(t,e):De}has(t,e){const n=e.hash,s=this.bucketFor(n);return!!s&&s.has(t,e)}*[Symbol.iterator](){for(const t of this.buckets)t&&(yield*t)}*entriesRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.entriesRight())}}*keys(){for(const t of this.buckets)t&&(yield*t.keys())}*values(){for(const t of this.buckets)t&&(yield*t.values())}*keysRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.keysRight())}}*valuesRight(){for(let t=this.buckets.length-1;t>=0;t--){const e=this.buckets[t];e&&(yield*e.valuesRight())}}}class Je{constructor(t,e,n,s){this.map=t,this.parent=e,this.buckets=[],this.size=0,this.idxFlags=0,this.depth=n,this.shift=s}hashConflicts(){return!1}clear(){this.size=0,this.buckets=[],this.idxFlags=0}bucketFor(t){const e=this.idxFlags,n=1<<(t>>>this.shift&31),s=Qe(e&n-1);if(e&n)return this.buckets[s]}replacing(t){const e=1<<(t.hash>>>this.shift&31);return this.idxFlags|=e,this.buckets[0]=t,this.size=t.size,t.parent=this,this}set(t,e,n){const s=n.hash,r=this.idxFlags,i=1<<(s>>>this.shift&31),o=Qe(r&i-1);let a;r&i?(a=this.buckets[o],this.depth&&a.hashConflicts(s)&&(a=new Je(this.map,this,this.depth-1,this.shift+5).replacing(a),this.buckets[o]=a),this.size-=a.size,a.set(t,e,n),this.size+=a.size):(a=this.map.createContainer(this,s),a.createEntry(t,e,n),this.buckets.splice(o,0,a),this.idxFlags|=i,this.size+=1)}emplace(t,e,n){const s=n.hash,r=this.idxFlags,i=1<<(s>>>this.shift&31),o=Qe(r&i-1);let a;r&i?(a=this.buckets[o],this.depth&&a.hashConflicts(s)&&(a=new Je(this.map,this,this.depth-1,this.shift+5).replacing(a),this.buckets[o]=a)):(a=this.map.createContainer(this,s),this.buckets.splice(o,0,a),this.idxFlags|=i),this.size-=a.size;const c=a.emplace(t,e,n);return this.size+=a.size,c}delete(t,e){const n=e.hash,s=this.idxFlags,r=1<<(n>>>this.shift&31);if(s&r){const n=Qe(s&r-1),i=this.buckets[n];if(i.delete(t,e))return this.size-=1,0===i.size&&(0===n?this.buckets.shift():this.buckets.length===n+1?this.buckets.pop():this.buckets.splice(n,1),this.idxFlags^=r),!0}return!1}get(t,e){const n=e.hash,s=this.bucketFor(n);if(s)return s.get(t,e)}optionalGet(t,e){const n=e.hash,s=this.bucketFor(n);return s?s.optionalGet(t,e):De}has(t,e){const n=e.hash,s=this.bucketFor(n);return!!s&&s.has(t,e)}*[Symbol.iterator](){for(const t of this.buckets)yield*t}*entriesRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].entriesRight()}*keys(){for(const t of this.buckets)yield*t.keys()}*values(){for(const t of this.buckets)yield*t.values()}*keysRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].keysRight()}*valuesRight(){for(let t=this.buckets.length-1;t>=0;t--)yield*this.buckets[t].valuesRight()}}const Qe=t=>16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24;class Ze{constructor(t){this.buckets=new Xe(this),t&&this.copy(t)}get size(){return this.buckets.size}get length(){return this.buckets.size}createContainer(t,e){return new Be(this,t,e)}has(t,e){const n=We(t,e);return this.buckets.has(t,n)}get(t,e){const n=We(t,e);return this.buckets.get(t,n)}keyOf(t,e){const n=e&&qe(e.equals)?e.equals:Ue(t);for(const e of this.entries())if(n(t,e[1]))return e[0]}lastKeyOf(t,e){const n=e&&qe(e.equals)?e.equals:Ue(t);for(const e of this.entriesRight())if(n(t,e[1]))return e[0]}optionalKeyOf(t,e){const n=e&&qe(e.equals)?e.equals:Ue(t);for(const e of this.entries())if(n(t,e[1]))return Ge(e[0]);return De}optionalLastKeyOf(t,e){const n=e&&qe(e.equals)?e.equals:Ue(t);for(const e of this.entriesRight())if(n(t,e[1]))return Ge(e[0]);return De}optionalGet(t,e){const n=We(t,e);return this.buckets.optionalGet(t,n)}find(t=(()=>!0),e){for(const[n,s]of this.entries())if(t.call(e,s,n,this))return s}findLast(t=(()=>!0),e){for(const[n,s]of this.entriesRight())if(t.call(e,s,n,this))return s}optionalFind(t=(()=>!0),e){for(const[n,s]of this.entries())if(t.call(e,s,n,this))return Ge(s);return De}optionalFindLast(t=(()=>!0),e){for(const[n,s]of this.entriesRight())if(t.call(e,s,n,this))return Ge(s);return De}findKey(t=((t,e)=>e),e){for(const[n,s]of this.entries())if(t.call(e,s,n,this))return n}findLastKey(t=((t,e)=>e),e){for(const[n,s]of this.entriesRight())if(t.call(e,s,n,this))return n}optionalFindKey(t=((t,e)=>e),e){for(const[n,s]of this.entries())if(t.call(e,s,n,this))return Ge(n);return De}optionalFindLastKey(t=((t,e)=>e),e){for(const[n,s]of this.entriesRight())if(t.call(e,s,n,this))return Ge(n);return De}set(t,e,n){const s=We(t,n);return this.buckets.set(t,e,s),this}emplace(t,e,n){const s=We(t,n);return this.buckets.emplace(t,e,s)}copy(t){const e=this;if(Ie(t)){for(const[n,s]of t)e.set(n,s);return this}if(qe(t.entries)){for(const[n,s]of t.entries())e.set(n,s);return this}if(qe(t.forEach))return t.forEach((function(t,n){e.set(n,t)})),this;throw new TypeError("HashMap.copy expects an object which is iterable, has an entries iterable function, or has a forEach function on it")}clone(){return new Ze(this)}delete(t,e){const n=We(t,e);return this.buckets.delete(t,n),this}clear(){return this.buckets.clear(),this}forEach(t,e){for(const n of this.entries())t.call(e,n[1],n[0],this);return this}forEachRight(t,e){for(const n of this.entriesRight())t.call(e,n[1],n[0],this);return this}every(t=(()=>!0),e){for(const[n,s]of this.entries())if(!t.call(e,s,n,this))return!1;return!0}some(t=(()=>!0),e,n){const s=n&&n.reverse?this.entriesRight():this.entries();for(const[n,r]of s)if(t.call(e,r,n,this))return!0;return!1}reduce(t,e,n){let s=e;if(void 0===e){let e=!0;for(const[r,i]of this.entries())e?(e=!1,s=i):s=t.call(n,s,i,r,this)}else for(const[e,r]of this.entries())s=t.call(n,s,r,e,this);return s}reduceRight(t,e,n){let s=e;if(void 0===e){let e=!0;for(const[r,i]of this.entriesRight())e?(e=!1,s=i):s=t.call(n,s,i,r,this)}else for(const[e,r]of this.entriesRight())s=t.call(n,s,r,e,this);return s}*[Symbol.iterator](){yield*this.entries()}*entriesRight(){yield*this.buckets.entriesRight()}*entries(){yield*this.buckets}*keys(){yield*this.buckets.keys()}*values(){yield*this.buckets.values()}*keysRight(){yield*this.buckets.keysRight()}*valuesRight(){yield*this.buckets.valuesRight()}}class $e extends Ze{constructor(t){super(t),0===this.size&&(this.start=void 0,this.end=void 0)}clear(){return this.start=void 0,this.end=void 0,super.clear()}createContainer(t,e){return new tn(this,t,e)}setLeft(t,e,n){const s=We(t,n);return s.addToStart=!0,this.buckets.set(t,e,s),this}emplaceLeft(t,e,n){const s=We(t,n);return s.addToStart=!0,this.buckets.emplace(t,e,s)}push(t,e,n){const s=We(t,n);return s.moveOnUpdate=!0,this.buckets.set(t,e,s),this}pushEmplace(t,e,n){const s=We(t,n);return s.moveOnUpdate=!0,this.buckets.emplace(t,e,s)}unshift(t,e,n){const s=We(t,n);return s.moveOnUpdate=!0,s.addToStart=!0,this.buckets.set(t,e,s),this}unshiftEmplace(t,e,n){const s=We(t,n);return s.moveOnUpdate=!0,s.addToStart=!0,this.buckets.emplace(t,e,s)}shift(){const t=this.start;if(t)return t.parent.deleteEntry(t),t.slice()}pop(){const t=this.end;if(t)return t.parent.deleteEntry(t),t.slice()}head(){const t=this.start;if(t)return t[1]}tail(){const t=this.end;if(t)return t[1]}optionalHead(){const t=this.start;return t?Ge(t[1]):De}optionalTail(){const t=this.end;return t?Ge(t[1]):De}headKey(){const t=this.start;if(t)return t[0]}tailKey(){const t=this.end;if(t)return t[0]}optionalHeadKey(){const t=this.start;return t?Ge(t[0]):De}optionalTailKey(){const t=this.end;return t?Ge(t[0]):De}reverse(){if(this.size>1){let t=this.start;do{const e=t.previous,n=t.next;t.previous=n,t.next=e,t=n}while(t);const e=this.start;this.start=this.end,this.end=e}return this}clone(){return new $e(this)}*[Symbol.iterator](){yield*this.entries()}*entries(){let t=this.start;for(;t;)yield t.slice(),t=t.next}*entriesRight(){let t=this.end;for(;t;)yield t.slice(),t=t.previous}*keys(){let t=this.start;for(;t;)yield t[0],t=t.next}*values(){let t=this.start;for(;t;)yield t[1],t=t.next}*keysRight(){let t=this.end;for(;t;)yield t[0],t=t.previous}*valuesRight(){let t=this.end;for(;t;)yield t[1],t=t.previous}}class tn extends Be{constructor(t,e,n){super(t,e,n)}createEntry(t,e,n){const s=super.createEntry(t,e,n),r=this.map;return void 0===r.start?r.end=r.start=s:n.addToStart?(r.start.previous=s,s.next=r.start,r.start=s):(r.end.next=s,s.previous=r.end,r.end=s),s}updateEntry(t,e,n){super.updateEntry(t,e,n),n.moveOnUpdate&&(n.addToStart?t.previous&&(t.next&&(t.next.previous=t.previous),t.previous.next=t.next,t===this.map.end&&(this.map.end=t.previous),t.previous=void 0,this.map.start.previous=t,t.next=this.map.start,this.map.start=t):t.next&&(t.previous&&(t.previous.next=t.next),t.next.previous=t.previous,t===this.map.start&&(this.map.start=t.next),t.next=void 0,this.map.end.next=t,t.previous=this.map.end,this.map.end=t))}deleteIndex(t){const e=super.deleteIndex(t),n=this.map;e.previous?e.previous.next=e.next:n.start=e.next,e.next?e.next.previous=e.previous:n.end=e.previous}}const en={HashMap:Ze,LinkedHashMap:$e,hash:He,isFunction:qe,isIterable:Ie,isString:function(t){return!(!t||!("string"==typeof t||t instanceof String))},equalsAndHash:We,hashCodeFor:Ke,equalsFor:Ue,some:Ge,none:De,Option:Ne};t.HashMap=Ze,t.LinkedHashMap=$e,t.Mootable=en,t.default=$e,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=hashmap.umd.min.js.map
