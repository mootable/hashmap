<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>utils/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HashMap.html">HashMap</a><ul class='methods'><li data-type='method' style='display: none;'><a href="HashMap.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#collect">collect</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#concat">concat</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#concatMap">concatMap</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#copy">copy</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#entries">entries</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#every">every</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#filter">filter</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#find">find</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#findIndex">findIndex</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#forEach">forEach</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#get">get</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#has">has</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#indexOf">indexOf</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#map">map</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#mapEntries">mapEntries</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#mapKeys">mapKeys</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#mapValues">mapValues</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#optionalGet">optionalGet</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#reduce">reduce</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#set">set</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#some">some</a></li><li data-type='method' style='display: none;'><a href="HashMap.html#values">values</a></li></ul></li><li><a href="LinkedHashMap.html">LinkedHashMap</a><ul class='methods'><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#collect">collect</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#concat">concat</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#concatMap">concatMap</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#copy">copy</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#entries">entries</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#every">every</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#filter">filter</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#find">find</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#findIndex">findIndex</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#forEach">forEach</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#get">get</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#has">has</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#indexOf">indexOf</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#map">map</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#mapEntries">mapEntries</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#mapKeys">mapKeys</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#mapValues">mapValues</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#optionalGet">optionalGet</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#reduce">reduce</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#set">set</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#some">some</a></li><li data-type='method' style='display: none;'><a href="LinkedHashMap.html#values">values</a></li></ul></li><li><a href="MapIterable.html">MapIterable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="MapIterable.html#.from">from</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#collect">collect</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#concat">concat</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#concatMap">concatMap</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#entries">entries</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#every">every</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#filter">filter</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#find">find</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#findIndex">findIndex</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#forEach">forEach</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#get">get</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#has">has</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#indexOf">indexOf</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#map">map</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#mapEntries">mapEntries</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#mapKeys">mapKeys</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#mapValues">mapValues</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#optionalGet">optionalGet</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#reduce">reduce</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#some">some</a></li><li data-type='method' style='display: none;'><a href="MapIterable.html#values">values</a></li></ul></li><li><a href="SetIterable.html">SetIterable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SetIterable.html#.from">from</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#collect">collect</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#concat">concat</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#entries">entries</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#every">every</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#filter">filter</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#find">find</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#forEach">forEach</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#has">has</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#map">map</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#reduce">reduce</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#some">some</a></li><li data-type='method' style='display: none;'><a href="SetIterable.html#values">values</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-@mootable_hashmap.html">@mootable/hashmap</a></li></ul><h3>Namespaces</h3><ul><li><a href="Mootable.html">Mootable</a></li><li></li><li></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#hashCode">hashCode</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isIterable">isIterable</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isString">isString</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">utils/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Utils - Utility functions
 * @namespace Mootable
 * @author Jack Moxley &lt;https://github.com/jackmoxley>
 * @version 0.12.6
 * Homepage: https://github.com/mootable/hashmap
 */
let uid = 0;

/**
 * Modified Murmur3 HashCode generator, with capped lengths.
 * This is NOT a cryptographic hash, this hash is designed to create as even a spread across a 32bit integer as is possible.
 * @see {@link https://github.com/aappleby/smhasher|MurmurHash specification on Github}
 * @see {@link https://en.wikipedia.org/wiki/MurmurHash|MurmurHash on Wikipedia}
 * @param key the string being hashed
 * @param len the max limit on the number of characters to hash
 * @param seed an optional random seed
 * @returns {number} the hash
 */
export function hashCode(key, len = 0, seed = 0) {
    len = len &amp;&amp; len > 0 ? Math.min(len, key.length) : key.length;
    seed = seed | 0;
    const remaining = len &amp; 1;
    const bytes = len - remaining;
    let hash = seed, k = 0, i = 0;

    while (i &lt; bytes) {
        k = (key.charCodeAt(i++) &amp; 0xffff) |
            ((key.charCodeAt(i++) &amp; 0xffff) &lt;&lt; 16);

        k *= (k * 0xcc9e2d51) | 0;
        k = (k &lt;&lt; 15) | (k >>> 17);
        k = (k * 0x1b873593);

        hash ^= k;
        hash = (hash &lt;&lt; 13) | (hash >>> 19);
        hash = (hash * 5 + 0xe6546b64);
    }
    if (remaining) {
        k ^= (key.charCodeAt(i) &amp; 0xffff);

        k = k * 0xcc9e2d51;
        k = (k &lt;&lt; 15) | (k >>> 17);
        k = k * 0x1b873593;
        hash ^= k;
    }

    hash ^= len;

    hash ^= hash >>> 16;
    hash = hash * 0x85ebca6b;
    hash ^= hash >>> 13;
    hash = hash * 0xc2b2ae35;
    hash ^= hash >>> 16;
    return hash | 0;
}

/**
 * Is the passed value not null and a function
 * @param func
 * @returns {boolean}
 */
export function isFunction(func) {
    return !!(func &amp;&amp; func.constructor &amp;&amp; func.call &amp;&amp; func.apply);
}

/**
 * Is the passed object iterable
 * @param iterable
 * @return {boolean}
 */
export function isIterable(iterable) {
    return !!(iterable &amp;&amp; isFunction(iterable[Symbol.iterator]));
}

/**
 * Is the passed value not null and a string
 * @param str
 * @returns {boolean}
 */
export function isString(str) { // jshint ignore:line
    return !!(str &amp;&amp; (typeof str === 'string' || str instanceof String));
}

/**
 * Is the passed value not null and a finite number.
 * NaN and ±Infinity would return false.
 * @param num
 * @returns {boolean}
 */
export function isNumber(num) { // jshint ignore:line
    return !!(num &amp;&amp; ((typeof num === 'number' || num instanceof Number) &amp;&amp; isFinite(num)));
}

/**
 * @private
 * The default Equals method we use this in most cases.
 *
 * @param me
 * @param them
 * @returns {boolean}
 */
export function defaultEquals(me, them) {
    return me === them;
}

/**
 * @private
 * Does a wider equals for use with arrays.
 *
 * @param me
 * @param them
 * @param depth
 * @return {boolean}
 */
export function deepEquals(me, them, depth = -1) {
    if (depth !== 0 &amp;&amp; (Array.isArray(me) &amp;&amp; Array.isArray(them))) {
        return me.length === them.length &amp;&amp; me.every((el, ix) => deepEquals(el, them[ix], depth - 1));
    }
    return me === them;
}

/**
 * @private
 * Returns back a pair of equalTo Methods and hash values, for a raft of different objects.
 * TODO: Revisit this at some point.
 * @param key
 * @returns {{equalTo: (function(*, *): boolean), hash: number}}
 */
export function hashEquals(key) {
    switch (typeof key) {
        case 'boolean':
            return {
                equalTo: defaultEquals, hash: key ? 0 : 1
            };
        case 'number':
            if (Number.isNaN(key)) {
                return {
                    equalTo: function (me, them) {
                        return Number.isNaN(them);
                    },
                    hash: 0
                };
            }
            if (!Number.isFinite(key)) {
                return {
                    equalTo: defaultEquals, hash: 0
                };
            }
            if (Number.isInteger(key)) {
                return {
                    equalTo: defaultEquals, hash: key
                };
            }
            return {
                equalTo: defaultEquals, hash: hashCode(key.toString())
            };

        case 'string':
            return {
                equalTo: defaultEquals, hash: hashCode(key)
            };
        case 'undefined':
            return {
                equalTo: defaultEquals, hash: 0
            };
        default: {
            // null
            if (!key) {
                return {
                    equalTo: defaultEquals, hash: 0
                };
            }

            if (key instanceof RegExp) {
                return {
                    equalTo: function (me, them) {
                        if (them &amp;&amp; them instanceof RegExp) {
                            return me.toString() === them.toString();
                        }
                        return false;
                    }, hash: hashCode(key.toString())
                };
            }
            if (key instanceof Date) {
                return {
                    equalTo: function (me, them) {
                        if (them instanceof Date) {
                            return me.getTime() === them.getTime();
                        }
                        return false;
                    }, hash: key.getTime() | 0
                };
            }
            if (key instanceof Array) {
                let functions = [];
                let hash_code = key.length;
                for (let i = 0; i &lt; key.length; i++) {
                    const currHE = hashEquals(key[i]);
                    functions.push(currHE.equalTo);
                    hash_code = hash_code + (currHE.hash * 31);
                }
                Object.freeze(functions);
                return {
                    equalTo: function (me, them) {
                        if (them instanceof Array &amp;&amp; me.length === them.length) {
                            for (let i = 0; i &lt; me.length; i++) {
                                if (!functions[i](me[i], them[i])) {
                                    return false;
                                }
                            }
                            return true;
                        }
                        return false;
                    },
                    hash: hash_code | 0
                };
            }
            // Ew get rid of this.
            if (!key.hasOwnProperty('_hmuid_')) {
                key._hmuid_ = ++uid;
                // hide(key, '_hmuid_');
            }
            return hashEquals(key._hmuid_);
        }
    }
}
/**
 * to get round the fact gets might be undefined but the value exists,
 * @private
 */
export class Option {
    constructor(has, value) {
        this.has = has;
        this.value = value;
    }

    static some(value) {
        return new Option(true, value);
    }

    static get none() {
        return none;
    }

    get size() {
        return this.has ? 1 : 0;
    }

    * [Symbol.iterator]() {
        if (this.has) {
            yield this.value;
        }
    }
}

export const some = Option.some;
export const none = new Option(false, undefined);</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sat Mar 27 2021 14:38:19 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


    <link type="text/css" rel="stylesheet" href="docs.css">
    
</body>
</html>
